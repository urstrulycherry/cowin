<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8">
	<title>COWIN</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css">
	<script type="text/javascript" charset="utf8"
		src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"></script>
	<link href="./styles/style.css" rel="stylesheet" />
	<link rel="shortcut icon" href="#">
	<style>
	    *{
	        overflow-x:scroll;
	    }
	</style>
</head>

<body>
	<div class="header">
		<h1>
			<marquee scrollamount="20">Get üíâ vaccinated!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Stay Home üè°
				Stay Safe!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Wear a
				Masküò∑!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Maintain Social
				Distance!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</marquee>
		</h1>
	</div>
	<div class="container">
		<div id="carouselExampleIndicators" class="carousel carousel-dark slide" data-bs-ride="carousel">
			<div class="carousel-indicators">
				<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
					aria-current="true" aria-label="Slide 1"></button>
				<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
					aria-label="Slide 2"></button>
				<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
					aria-label="Slide 3"></button>
				<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3"
					aria-label="Slide 3"></button>
			</div>
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img src="./images/c1.jpeg" class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img src="./images/c2.jpeg" class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img src="./images/c3.jpeg" class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img src="./images/c4.jpeg" class="d-block w-100" alt="...">
				</div>
			</div>
			<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
				data-bs-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
				data-bs-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>
	</div>

	<div class="works">
		<div class="one">
			<i class="fa fa-hospital-o fa-5x" aria-hidden="true"></i> <br />
			<h1>Choose Vacination Centre</h1>
			Select your nearby Vaccine Center for vaccination
		</div>
		<div class="two">
			<i class="fa fa-question-circle-o fa-5x" aria-hidden="true"></i> <br />
			<h1>ANY QUESTION?</h1>
			Please follow our <a href="https://www.cowin.gov.in/faq">Frequently
				asked questions (FAQ)</a>
		</div>
	</div>
	&nbsp;
	<hr />
	<div class="container">
		<div class="d-flex justify-content-center">
			<div class="btn-group" role="group" aria-label="Basic radio toggle button group"
				style="background-color: #f3f3f3">
				<input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked
					value="SBP" onclick="handle(this)">
				<label class="btn btn-outline-warning" for="btnradio1">Search by PIN</label>

				<input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" value="SBD"
					onclick="handle(this)">
				<label class="btn btn-outline-danger" for="btnradio2">Search by district</label>

				<!-- <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off" value="SBP7"
					onclick="handle(this)">
				<label class="btn btn-outline-primary" for="btnradio3">Search by PIN for 7 days</label>

				<input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off" value="SBD7"
					onclick="handle(this)">
				<label class="btn btn-outline-primary" for="btnradio4">Search by district for 7 days</label>

				<input type="radio" class="btn-check" name="btnradio" id="btnradio5" autocomplete="off" value="SBC"
					onclick="handle(this)">
				<label class="btn btn-outline-warning" for="btnradio5">Search by center for 7 days</label> -->
			</div>
		</div>
	</div>
	<div class="container justify-content-center" id="main-content">
		<div id="one">
			<form id="SBP">
				<div class="input-group mb-3">
					<span class="input-group-text" id="basic-addon1">Pin&nbsp;&nbsp;&nbsp;</span>
					<input type="number" class="form-control" placeholder="Pin" name="pincode" id="pincode" required
						aria-label="pin" aria-describedby="basic-addon1">
				</div>
				<div class="input-group mb-3">
					<span class="input-group-text" id="basic-addon1">Date</span>
					<input type="text" class="form-control" placeholder="DD-MM-YYYY" name="date" required
						pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}" aria-label="date" aria-describedby="basic-addon1"
						id="date">
				</div>
				<div class="input-group mb-3 d-flex justify-content-center">
					<button type="submit" class="btn btn-primary" name="get">Get</button>
				</div>
			</form>
		</div>
		<div id="two">
			<form id="SBD">
				<div class="input-group mb-3">
					<span class="input-group-text">State&emsp;</span>
					<select class="form-select" id="SBDstates" required></select>
				</div>

				<div class="input-group mb-3">
					<span class="input-group-text">Distrcit</span>
					<select class="form-select" id="SBDDistrict" required></select>
				</div>

				<div class="input-group mb-3">
					<span class="input-group-text" id="basic-addon1">Date&emsp;</span>
					<input type="text" class="form-control" placeholder="DD-MM-YYYY" name="date" required
						pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}" aria-label="date" aria-describedby="basic-addon1"
						id="date1">
				</div>

				<div class="input-group mb-3 d-flex justify-content-center">
					<button type="submit" class="btn btn-primary">Get</button>
				</div>
			</form>
		</div>
		<div id="thr">
			<form id="SBP7">
				<div class="input-group mb-3">
					<span class="input-group-text" id="basic-addon1">Pin&nbsp;&nbsp;&nbsp;</span>
					<input type="number" class="form-control" placeholder="Pin" name="pincode" id="pincode1" required
						aria-label="pin" aria-describedby="basic-addon1">
				</div>
				<div class="input-group mb-3">
					<span class="input-group-text" id="basic-addon1">Date</span>
					<input type="text" class="form-control" placeholder="DD-MM-YYYY" name="date" required
						pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}" aria-label="date" aria-describedby="basic-addon1"
						id="date2">
				</div>
				<div class="input-group mb-3 d-flex justify-content-center">
					<button type="submit" class="btn btn-primary">Get</button>
				</div>
			</form>
		</div>
		<div id="four">
			<form id="SBD7">
				<div class="input-group mb-3">
					<span class="input-group-text">State&emsp;</span>
					<select class="form-select" id="SBDstates1" required></select>
				</div>

				<div class="input-group mb-3">
					<span class="input-group-text">Distrcit</span>
					<select class="form-select" id="SBDDistrict1" required></select>
				</div>

				<div class="input-group mb-3">
					<span class="input-group-text" id="basic-addon1">Date&emsp;</span>
					<input type="text" class="form-control" placeholder="DD-MM-YYYY" name="date" required
						pattern="[0-9]{2}-[0-9]{2}-[0-9]{4}" aria-label="date" aria-describedby="basic-addon1"
						id="date3">
				</div>

				<div class="input-group mb-3 d-flex justify-content-center">
					<button type="submit" class="btn btn-primary">Get</button>
				</div>
			</form>
		</div>
	</div>
	<p id="SBPData" class="container" style="display: none;"></p>
	<p class="container"></p>
</body>
<footer>
	<div class="container">
		<!-- ¬© Copyright 2021. All Rights Reserved.<br /> -->
		Made with üò∑ by Charan Kumar, Nithesh Sai & Raj Kumar
	</div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>
<script type="text/javascript">
	$("#SBP").on('submit', function (e) {
		e.preventDefault();
		var pincode = document.getElementById("pincode").value;
		var date = document.getElementById("date").value;
		$.ajax({
			url: "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin",
			type: "get",
			data: { "pincode": pincode, "date": date },
			success: function (data) {
				data = data["sessions"];
				fillData(data, document.getElementById("SBPData"));
			}
		});
	});

	$("#SBD").on('submit', function (e) {
		e.preventDefault();
		console.log(document.getElementById('SBDDistrict').value);
		var date = document.getElementById("date1").value;
		$.ajax({
			url: "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict",
			type: "get",
			data: { "district_id": document.getElementById('SBDDistrict').value, "date": date },
			success: function (data) {
				data = data["sessions"];
				fillData(data, document.getElementById("SBPData"));
			}
		});
	});

	$("#SBP7").on('submit', function (e) {
		e.preventDefault();
		var pincode = document.getElementById("pincode1").value;
		var date = document.getElementById("date2").value;
		$.ajax({
			url: "https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin",
			type: "get",
			data: { "pincode": pincode, "date": date },
			success: function (data) {
				data = data["centers"];
				console.log(data);
			}
		});
	});


	function fillData(data, div) {
		div.style.display = "block";
		if (data.length == 0) {
			div.innerHTML = "<h1>No Slots Available</h1>";
		}
		else {
			div.innerHTML = "<h1>" + data.length + " Slot(s) Available</h1>";
			var table = document.createElement("TABLE");
			var thead = table.createTHead();
			var rowH = thead.insertRow(0);
			var cellH = rowH.insertCell(0); cellH.innerHTML = "Address";
			cellH = rowH.insertCell(1); cellH.innerHTML = "Avaiable Capacity";
			cellH = rowH.insertCell(2); cellH.innerHTML = "Center Id";
			cellH = rowH.insertCell(3); cellH.innerHTML = "Date";
			cellH = rowH.insertCell(4); cellH.innerHTML = "District";
			cellH = rowH.insertCell(5); cellH.innerHTML = "Fee";
			cellH = rowH.insertCell(6); cellH.innerHTML = "Pincode";
			cellH = rowH.insertCell(7); cellH.innerHTML = "Vaccine";
			table.id = "SBPTable";
			var tbody = table.createTBody();
			var cols = ['address', 'available_capacity', 'center_id', 'date', 'district_name', 'fee', 'pincode', 'vaccine'];
			for (var i = 0; i < data.length; i++) {
				var row = tbody.insertRow(0);
				for (var j = 0; j < 8; j++) {
					var cell = row.insertCell(j);
					cell.innerHTML = data[i][cols[j]];
				}
			}
			div.appendChild(table);
			$('#SBPTable').DataTable();
		}
	}

	function handle(check) {
		hideAll();
		if (check.value == "SBP") {
			document.getElementById("one").style.display = "block";
		}
		if (check.value == "SBD") {
			fillStates("#SBDstates", "#SBDDistrict");
			document.getElementById("two").style.display = "block";
		}
		if (check.value == "SBP7") {
			document.getElementById("thr").style.display = "block";
		}
		if (check.value == "SBD7") {
			fillStates("#SBDstates1", "#SBDDistrict1");
			document.getElementById("four").style.display = "block";
		}
	}

	function fillStates(st, dt) {
		$(st).empty();
		$.ajax({
			url: "https://cdn-api.co-vin.in/api/v2/admin/location/states",
			type: "get",
			success: function (data) {
				data = data["states"];
				for (var i = 0; i < data.length; i++) {
					var option = document.createElement("option");
					option.text = data[i]['state_name'];
					option.value = data[i]['state_id'];
					$(st).append(option);
				}
			}
		});
		fillDistrict(1, dt);
	}

	$('body').on('change', '#SBDstates', function () {
		fillDistrict(this.value, "#SBDDistrict");
	});
	$('body').on('change', '#SBDstates1', function () {
		fillDistrict(this.value, "#SBDDistrict1");
	});
	function fillDistrict(SID, dt) {
		$(dt).empty();
		$.ajax({
			url: "https://cdn-api.co-vin.in/api/v2/admin/location/districts/" + SID,
			type: "get",
			success: function (data) {
				data = data["districts"];
				for (var i = 0; i < data.length; i++) {
					var option = document.createElement("option");
					option.text = data[i]['district_name'];
					option.value = data[i]['district_id'];
					$(dt).append(option);
				}
			}
		});
	}
	hideAll();
	document.getElementById("one").style.display = "block";
	function hideAll() {
		document.getElementById("one").style.display = "none";
		document.getElementById("two").style.display = "none";
		document.getElementById("thr").style.display = "none";
		document.getElementById("four").style.display = "none";
		document.getElementById("SBPData").style.display = "none";
	}

</script>

</html>